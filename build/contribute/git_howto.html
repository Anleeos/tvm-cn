
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Git Usage Tips &#8212; tvm-cn 1.0.0 文档</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="Using TVM’s CI" href="ci.html" />
    <link rel="prev" title="Code Guide and Tips" href="code_guide.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="git-usage-tips">
<span id="git-howto"></span><h1>Git Usage Tips<a class="headerlink" href="#git-usage-tips" title="永久链接至标题">¶</a></h1>
<div class="contents local topic" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#how-to-resolve-a-conflict-with-main" id="id2">How to resolve a conflict with <code class="docutils literal notranslate"><span class="pre">main</span></code></a></p></li>
<li><p><a class="reference internal" href="#how-to-combine-multiple-commits-into-one" id="id3">How to combine multiple commits into one</a></p></li>
<li><p><a class="reference internal" href="#reset-to-the-most-recent-main-branch" id="id4">Reset to the most recent main branch</a></p></li>
<li><p><a class="reference internal" href="#recover-a-previous-commit-after-reset" id="id5">Recover a Previous Commit after Reset</a></p></li>
<li><p><a class="reference internal" href="#apply-only-k-latest-commits-on-to-the-main" id="id6">Apply only k-Latest Commits on to the main</a></p></li>
<li><p><a class="reference internal" href="#what-is-the-consequence-of-force-push" id="id7">What is the consequence of force push</a></p></li>
</ul>
</div>
<p>Here are some tips for git workflow.</p>
<div class="section" id="how-to-resolve-a-conflict-with-main">
<h2><a class="toc-backref" href="#id2">How to resolve a conflict with <code class="docutils literal notranslate"><span class="pre">main</span></code></a><a class="headerlink" href="#how-to-resolve-a-conflict-with-main" title="永久链接至标题">¶</a></h2>
<ul>
<li><p>First rebase to most recent main</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># The first two steps can be skipped after you do it once.</span>
git remote add upstream <span class="o">[</span>url to tvm repo<span class="o">]</span>
git fetch upstream
git rebase upstream/main
</pre></div>
</div>
</li>
<li><p>The git may show some conflicts it cannot merge, say <code class="docutils literal notranslate"><span class="pre">conflicted.py</span></code>.</p>
<ul>
<li><p>Manually modify the file to resolve the conflict.</p></li>
<li><p>After you resolved the conflict, mark it as resolved by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git add conflicted.py
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Then you can continue rebase by</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git rebase --continue
</pre></div>
</div>
</li>
<li><p>Finally push to your fork, you may need to force push here.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git push --force
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="how-to-combine-multiple-commits-into-one">
<h2><a class="toc-backref" href="#id3">How to combine multiple commits into one</a><a class="headerlink" href="#how-to-combine-multiple-commits-into-one" title="永久链接至标题">¶</a></h2>
<p>Sometimes we want to combine multiple commits, especially when later commits are only fixes to previous ones,
to create a PR with set of meaningful commits. You can do it by following steps.</p>
<ul>
<li><p>Before doing so, configure the default editor of git if you haven’t done so before.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git config core.editor the-editor-you-like
</pre></div>
</div>
</li>
<li><p>Assume we want to merge last 3 commits, type the following commands</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git rebase -i HEAD~3
</pre></div>
</div>
</li>
<li><p>It will pop up an text editor. Set the first commit as <code class="docutils literal notranslate"><span class="pre">pick</span></code>, and change later ones to <code class="docutils literal notranslate"><span class="pre">squash</span></code>.</p></li>
<li><p>After you saved the file, it will pop up another text editor to ask you modify the combined commit message.</p></li>
<li><p>Push the changes to your fork, you need to force push.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git push --force
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="reset-to-the-most-recent-main-branch">
<h2><a class="toc-backref" href="#id4">Reset to the most recent main branch</a><a class="headerlink" href="#reset-to-the-most-recent-main-branch" title="永久链接至标题">¶</a></h2>
<p>You can always use git reset to reset your version to the most recent main.
Note that <strong>all your local changes will get lost</strong>.
So only do it when you do not have local changes or when your pull request just get merged.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git fetch origin main
git reset --hard FETCH_HEAD
</pre></div>
</div>
</div>
<div class="section" id="recover-a-previous-commit-after-reset">
<h2><a class="toc-backref" href="#id5">Recover a Previous Commit after Reset</a><a class="headerlink" href="#recover-a-previous-commit-after-reset" title="永久链接至标题">¶</a></h2>
<p>Sometimes we could mistakenly reset a branch to a wrong commit.
When that happens, you can use the following command to show the list
of recent commits</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git reflog
</pre></div>
</div>
<p>Once you get the right hashtag, you can use git reset again to change
the head to the right commit.</p>
</div>
<div class="section" id="apply-only-k-latest-commits-on-to-the-main">
<h2><a class="toc-backref" href="#id6">Apply only k-Latest Commits on to the main</a><a class="headerlink" href="#apply-only-k-latest-commits-on-to-the-main" title="永久链接至标题">¶</a></h2>
<p>Sometimes it is useful to only apply your k-latest changes on top of the main.
This usually happens when you have other m-commits that are already merged
before these k-commits. Directly rebase against the main might cause merge conflicts
on these first m-commits(which are can be safely discarded).</p>
<p>You can instead use the following command</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># k is the concrete number</span>
<span class="c1"># Put HEAD~2 for the last 1 commit.</span>
git rebase --onto upstream/main HEAD~k
</pre></div>
</div>
<p>You can then force push to the main. Note that the above command will discard
all the commits before tha last k ones.</p>
</div>
<div class="section" id="what-is-the-consequence-of-force-push">
<h2><a class="toc-backref" href="#id7">What is the consequence of force push</a><a class="headerlink" href="#what-is-the-consequence-of-force-push" title="永久链接至标题">¶</a></h2>
<p>The previous two tips requires force push, this is because we altered the path of the commits.
It is fine to force push to your own fork, as long as the commits changed are only yours.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">tvm-cn</a></h1>








<h3>导航</h3>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">安装 TVM</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contributor Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how_to/index.html">How To Guides</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/tutorial/index.html">Developer Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/how_to/how_to.html">Developer How-To Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Architecture Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">Design and Architecture</a></li>
</ul>
<p class="caption"><span class="caption-text">Topic Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topic/microtvm/index.html">microTVM: TVM on bare-metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topic/vta/index.html">VTA: Versatile Tensor Accelerator</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Contributor Guide</a><ul>
      <li>Previous: <a href="code_guide.html" title="上一章">Code Guide and Tips</a></li>
      <li>Next: <a href="ci.html" title="下一章">Using TVM’s CI</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, HyperAI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/contribute/git_howto.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>